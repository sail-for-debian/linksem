<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<meta content="text/html; charset=iso-8859-1" http-equiv="Content-Type">
<link rel="Start" href="index.html">
<link rel="previous" href="Nvar.html">
<link rel="next" href="Path.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Index of module types" rel=Appendix href="index_module_types.html">
<link title="Ast_util" rel="Chapter" href="Ast_util.html">
<link title="Backend" rel="Chapter" href="Backend.html">
<link title="Backend_common" rel="Chapter" href="Backend_common.html">
<link title="Coq_decidable_equality" rel="Chapter" href="Coq_decidable_equality.html">
<link title="Def_trans" rel="Chapter" href="Def_trans.html">
<link title="Finite_map" rel="Chapter" href="Finite_map.html">
<link title="Ident" rel="Chapter" href="Ident.html">
<link title="Initial_env" rel="Chapter" href="Initial_env.html">
<link title="Macro_expander" rel="Chapter" href="Macro_expander.html">
<link title="Main" rel="Chapter" href="Main.html">
<link title="Module_dependencies" rel="Chapter" href="Module_dependencies.html">
<link title="Name" rel="Chapter" href="Name.html">
<link title="Nvar" rel="Chapter" href="Nvar.html">
<link title="Output" rel="Chapter" href="Output.html">
<link title="Path" rel="Chapter" href="Path.html">
<link title="Pattern_syntax" rel="Chapter" href="Pattern_syntax.html">
<link title="Patterns" rel="Chapter" href="Patterns.html">
<link title="Pcombinators" rel="Chapter" href="Pcombinators.html">
<link title="Pp" rel="Chapter" href="Pp.html">
<link title="Precedence" rel="Chapter" href="Precedence.html">
<link title="Process_file" rel="Chapter" href="Process_file.html">
<link title="Rename_top_level" rel="Chapter" href="Rename_top_level.html">
<link title="Reporting" rel="Chapter" href="Reporting.html">
<link title="Reporting_basic" rel="Chapter" href="Reporting_basic.html">
<link title="Seplist" rel="Chapter" href="Seplist.html">
<link title="Syntactic_tests" rel="Chapter" href="Syntactic_tests.html">
<link title="Target" rel="Chapter" href="Target.html">
<link title="Target_binding" rel="Chapter" href="Target_binding.html">
<link title="Target_syntax" rel="Chapter" href="Target_syntax.html">
<link title="Target_trans" rel="Chapter" href="Target_trans.html">
<link title="Trans" rel="Chapter" href="Trans.html">
<link title="Typecheck" rel="Chapter" href="Typecheck.html">
<link title="Typecheck_ctxt" rel="Chapter" href="Typecheck_ctxt.html">
<link title="Typed_ast" rel="Chapter" href="Typed_ast.html">
<link title="Typed_ast_syntax" rel="Chapter" href="Typed_ast_syntax.html">
<link title="Types" rel="Chapter" href="Types.html">
<link title="Tyvar" rel="Chapter" href="Tyvar.html">
<link title="Util" rel="Chapter" href="Util.html"><link title="constructing output" rel="Section" href="#2_constructingoutput">
<link title="Pretty Printing" rel="Section" href="#2_PrettyPrinting">
<link title="Output to Rope" rel="Section" href="#2_OutputtoRope">
<link title="Latex Output" rel="Section" href="#2_LatexOutput">
<link title="Blocks" rel="Subsection" href="#3_Blocks">
<link title="Spacing" rel="Subsection" href="#3_Spacing">
<title>Output</title>
</head>
<body>
<div class="navbar"><a href="Nvar.html">Previous</a>
&nbsp;<a href="index.html">Up</a>
&nbsp;<a href="Path.html">Next</a>
</div>
<center><h1>Module <a href="type_Output.html">Output</a></h1></center>
<br>
<pre><span class="keyword">module</span> Output: <code class="code">sig</code> <a href="Output.html">..</a> <code class="code">end</code></pre>Intermediate output format before going to strings<br>
<hr width="100%">
<pre><span id="TYPEt"><span class="keyword">type</span> <code class="type"></code>t</span> </pre>

<br><code><span id="TYPEt'"><span class="keyword">type</span> <code class="type"></code>t'</span> = </code><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Kwd'</span> <span class="keyword">of</span> <code class="type">string</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Ident'</span> <span class="keyword">of</span> <code class="type">Ulib.Text.t</code></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Num'</span> <span class="keyword">of</span> <code class="type">int</code></code></td>

</tr></table>


<br><code><span id="TYPEid_annot"><span class="keyword">type</span> <code class="type"></code>id_annot</span> = </code><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Term_const</span> <span class="keyword">of</span> <code class="type">bool * bool</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code class="code">Term_const(is_quotation, needs_escaping)</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Term_field</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Term_method</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Term_var</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Term_var_toplevel</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Term_spec</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Type_ctor</span> <span class="keyword">of</span> <code class="type">bool * bool</code></code></td>
<td class="typefieldcomment" align="left" valign="top" ><code>(*</code></td><td class="typefieldcomment" align="left" valign="top" ><code class="code">Term_ctor(is_quotation, needs_escaping)</code></td><td class="typefieldcomment" align="left" valign="bottom" ><code>*)</code></td>
</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Type_var</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Nexpr_var</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Module_name</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Class_name</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Target</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Component</span></code></td>

</tr></table>

<div class="info">
kind annotation for latex'd identifiers<br>
</div>

<br>
<span id="2_constructingoutput"><h2>constructing output</h2></span><br>
<pre><span id="VALemp"><span class="keyword">val</span> emp</span> : <code class="type"><a href="Output.html#TYPEt">t</a></code></pre><div class="info">
Empty output<br>
</div>
<pre><span id="VALkwd"><span class="keyword">val</span> kwd</span> : <code class="type">string -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">kwd s</code> constructs the output for keyword <code class="code">s</code><br>
</div>
<pre><span id="VALnum"><span class="keyword">val</span> num</span> : <code class="type">int -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">num i</code> constructs the output for number <code class="code">i</code><br>
</div>
<pre><span id="VALstr"><span class="keyword">val</span> str</span> : <code class="type">Ulib.Text.t -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">str s</code> constructs the output for string constant <code class="code">s</code><br>
</div>
<pre><span id="VALws"><span class="keyword">val</span> ws</span> : <code class="type">Ast.lex_skips -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
Whitespace<br>
</div>
<pre><span id="VALerr"><span class="keyword">val</span> err</span> : <code class="type">string -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">err message</code> is an error output. An exception is thrown with the given <code class="code">message</code>
    if this output is created. Used for marking problems.<br>
</div>
<pre><span id="VALmeta"><span class="keyword">val</span> meta</span> : <code class="type">string -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">meta s</code> creates a string directly as output such that the formatting can't interfere
    with string <code class="code">s</code> any more<br>
</div>
<pre><span id="VALcomment"><span class="keyword">val</span> comment</span> : <code class="type">string -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
A comment<br>
</div>
<pre><span id="VALcomment_block"><span class="keyword">val</span> comment_block</span> : <code class="type">int option -> string list -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">comment_block min_width_opt content</code> comment a whole 
    list of lines in a block.<br>
</div>
<pre><span id="VALnew_line"><span class="keyword">val</span> new_line</span> : <code class="type"><a href="Output.html#TYPEt">t</a></code></pre><div class="info">
a new line<br>
</div>
<pre><span id="VALspace"><span class="keyword">val</span> space</span> : <code class="type"><a href="Output.html#TYPEt">t</a></code></pre><div class="info">
a single space<br>
</div>
<pre><span id="VALtexspace"><span class="keyword">val</span> texspace</span> : <code class="type"><a href="Output.html#TYPEt">t</a></code></pre><div class="info">
??? Unsure what it is. Some kind of tex specific space, similar to space, but
    treated slightly differently by the Latex backend. It seems to be for example removed
    at beginnings and ends of lines and multiple ones are collapsed into a single space.<br>
</div>
<pre><span id="VALid"><span class="keyword">val</span> id</span> : <code class="type"><a href="Output.html#TYPEid_annot">id_annot</a> -> Ulib.Text.t -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
An identifier<br>
</div>
<pre><span id="VAL(^)"><span class="keyword">val</span> (^)</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">o1 ^ o2</code> appends to outputs to each other<br>
</div>
<pre><span id="VALflat"><span class="keyword">val</span> flat</span> : <code class="type"><a href="Output.html#TYPEt">t</a> list -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">flat [o0; ...; on]</code> appends all the outputs in the list, i.e.
    it does <code class="code">o0 ^ ... ^ on</code>.<br>
</div>
<pre><span id="VALconcat"><span class="keyword">val</span> concat</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a> list -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">concat sep [o0; ...; on]</code> appends all the outputs in the list using
    the separator <code class="code">sep</code>, i.e.
    it does <code class="code">o0 ^ sep ^ o1 ^ ... sep ^ tn</code>.<br>
</div>
<pre><span id="VALprefix_if_not_emp"><span class="keyword">val</span> prefix_if_not_emp</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">prefix_if_not_emp o1 o2</code> returns <code class="code">o1 ^ o2</code> if <code class="code">o2</code> is not empty and
    <code class="code">emp</code> otherwise<br>
</div>
<br>
<span id="2_PrettyPrinting"><h2>Pretty Printing</h2></span><br>
<br>
<span id="3_Blocks"><h3>Blocks</h3></span> 
    Blocks are used for pretty printing if the original whitespace should not be used. 
    This is usually the case, if the source was generated by some macro, such that 
    either no original spacing is present or it is likely to be broken. 
    If the first argument of a block is <code class="code">true</code> this block and all it's content is
    printed using OCaml's <code class="code">Format</code> library. The other arguments of blocks correspond
    to blocks in the <code class="code">Format</code> library. They describe indentation, the type of block and the
    content.<br>
<pre><span id="VALblock"><span class="keyword">val</span> block</span> : <code class="type">bool -> int -> <a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><pre><span id="VALblock_h"><span class="keyword">val</span> block_h</span> : <code class="type">bool -> int -> <a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><pre><span id="VALblock_v"><span class="keyword">val</span> block_v</span> : <code class="type">bool -> int -> <a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><pre><span id="VALblock_hv"><span class="keyword">val</span> block_hv</span> : <code class="type">bool -> int -> <a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><pre><span id="VALblock_hov"><span class="keyword">val</span> block_hov</span> : <code class="type">bool -> int -> <a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><pre><span id="VALcore"><span class="keyword">val</span> core</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">core out</code> is a marker for marking the most important part of some output. It marks for example the
    rhs of a definition. Together with <code class="code">extract_core</code> this is used to sometimes only print the most essential part
    of some output<br>
</div>
<pre><span id="VALremove_core"><span class="keyword">val</span> remove_core</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">remove_core o</code> removes all occurences of core form <code class="code">t</code> by replacing <code class="code">core o'</code> with just <code class="code">o'</code>.<br>
</div>
<pre><span id="VALextract_core"><span class="keyword">val</span> extract_core</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a> list</code></pre><div class="info">
<code class="code">extract_core o</code> extracts all top-level cores from output <code class="code">o</code>.<br>
</div>
<br>
<span id="3_Spacing"><h3>Spacing</h3></span><br>
<pre><span id="VALremove_initial_ws"><span class="keyword">val</span> remove_initial_ws</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">removes intial whitespace (including comments) from output</code><br>
</div>
<pre><span id="VALbreak_hint"><span class="keyword">val</span> break_hint</span> : <code class="type">bool -> int -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">break_hint add_space ind</code> is a general hint for a line-break. If <code class="code">add_space</code> is set
    a space is added in case no line-break is needed. Otherwise a line-break with the given 
    indentation <code class="code">ind</code> is applied.<br>
</div>
<pre><span id="VALbreak_hint_cut"><span class="keyword">val</span> break_hint_cut</span> : <code class="type"><a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">break_hint_cut</code> is short for <code class="code">break_hint false 0</code>. It allows a newline at this posistion
    without indentation. If no newline is needed don't add any space.<br>
</div>
<pre><span id="VALbreak_hint_space"><span class="keyword">val</span> break_hint_space</span> : <code class="type">int -> <a href="Output.html#TYPEt">t</a></code></pre><div class="info">
<code class="code">break_hint_space ind</code> is short for <code class="code">break_hint true ind</code>. 
    It adds a space or a newline. If a newline is needed use the given indentation.<br>
</div>
<pre><span id="VALensure_newline"><span class="keyword">val</span> ensure_newline</span> : <code class="type"><a href="Output.html#TYPEt">t</a></code></pre><div class="info">
Make sure there is a newline starting here. This inserts a newline if necessary.<br>
</div>
<br>
<span id="2_OutputtoRope"><h2>Output to Rope</h2></span><br>
<pre><span id="VALto_rope"><span class="keyword">val</span> to_rope</span> : <code class="type">Ulib.Text.t -><br>       (Ast.lex_skip -> Ulib.Text.t) -><br>       (<a href="Output.html#TYPEt'">t'</a> -> <a href="Output.html#TYPEt'">t'</a> -> bool) -> <a href="Output.html#TYPEt">t</a> -> Ulib.Text.t</code></pre><div class="info">
<code class="code">to_rope quote_char lex_skips_to_rope need_space t</code> formats the output <code class="code">t</code> as an unicode text.
The <code class="code">quote_char</code> argument is used around strings. The function <code class="code">lex_skips_to_rope</code> is used to format
whitespace. Finally the function <code class="code">need_space</code> is used to determine, whether an extra space is needed between
simplified outputs.<br>
</div>
<pre><span id="VALml_comment_to_rope"><span class="keyword">val</span> ml_comment_to_rope</span> : <code class="type">Ast.ml_comment -> Ulib.Text.t</code></pre><div class="info">
<code class="code">ml_comment_to_rope com</code> formats an ML-comment as a text by putting <code class="code">(*</code> and <code class="code">*)</code> around it.<br>
</div>
<br>
<span id="2_LatexOutput"><h2>Latex Output</h2></span><br>
<pre><span id="VALto_rope_tex"><span class="keyword">val</span> to_rope_tex</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> Ulib.Text.t</code></pre><div class="info">
<code class="code">to_rope_tex t</code> corresponds to <code class="code">to_rope</code> for the Latex backend. Since it is used for only one backend,
    the backend parameters of <code class="code">to_rope</code> can be hard-coded.<br>
</div>
<pre><span id="VALto_rope_option_tex"><span class="keyword">val</span> to_rope_option_tex</span> : <code class="type"><a href="Output.html#TYPEt">t</a> -> Ulib.Text.t option</code></pre><div class="info">
<code class="code">to_rope_option_tex t</code> is similar to <code class="code">to_rope_tex t</code>. However, it checks whether the
    result is an empty text and returns <code class="code">None</code> is in this case.<br>
</div>
<pre><span id="VALtex_escape"><span class="keyword">val</span> tex_escape</span> : <code class="type">Ulib.Text.t -> Ulib.Text.t</code></pre><pre><span id="VALtex_command_escape"><span class="keyword">val</span> tex_command_escape</span> : <code class="type">Ulib.Text.t -> Ulib.Text.t</code></pre><pre><span id="VALtex_command_label"><span class="keyword">val</span> tex_command_label</span> : <code class="type">Ulib.Text.t -> Ulib.Text.t</code></pre><pre><span id="VALtex_command_name"><span class="keyword">val</span> tex_command_name</span> : <code class="type">Ulib.Text.t -> Ulib.Text.t</code></pre></body></html>